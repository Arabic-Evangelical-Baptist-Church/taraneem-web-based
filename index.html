<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Presentation Controller</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #controls {
            margin: 20px 0;
        }
        #playlist {
            margin-top: 20px;
        }
        #outputButtons {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Song Presentation Controller</h1>

    <div id="controls">
        <input type="text" id="songInput" placeholder="Enter song title" />
        <button onclick="addSong()">Add Song</button>
    </div>

    <div id="outputButtons">
        <button onclick="openOutputScreen('congregation')">Congregation Display</button>
        <button onclick="openOutputScreen('stage')">Stage Display</button>
        <button onclick="openOutputScreen('lowerThird')">Lower Third Display</button>
    </div>

    <div id="playlist">
        <h2>Playlist</h2>
        <ul id="playlistItems"></ul>
    </div>

    <div id="verseControls">
        <input type="text" id="verseInput" placeholder="Enter verse" />
        <button onclick="broadcastVerse()">Broadcast Verse</button>
    </div>

    <script>
        const broadcastChannel = new BroadcastChannel('song_channel');

        function addSong() {
            const songTitle = document.getElementById('songInput').value;
            if (songTitle) {
                const li = document.createElement('li');
                li.textContent = songTitle;
                document.getElementById('playlistItems').appendChild(li);
                document.getElementById('songInput').value = '';
            }
        }

        function broadcastVerse() {
            const verse = document.getElementById('verseInput').value;
            if (verse) {
                broadcastChannel.postMessage({ type: 'verse', content: verse });
                document.getElementById('verseInput').value = '';
            }
        }

        function openOutputScreen(type) {
            window.open(`${type}.html`, `${type}Display`, 'width=800,height=600');
        }
    </script>
</body>
</html>
